"use strict";(self.webpackChunkpd_pro_angularcli=self.webpackChunkpd_pro_angularcli||[]).push([[127],{42127:function(P,h,c){c.r(h),c.d(h,{StatistiqueModule:function(){return Z}});var l=c(43144),m=c(15671),v=c(69808),C=c(52297),b=c(93075),y=c(68332),g=c.n(y),t=c(91891),k=c(40520),f=function(){var s=function(){function i(n){(0,m.Z)(this,i),this.http=n,this.apiUrl="http://localhost:8000/api/statistics/"}return(0,l.Z)(i,[{key:"getTotals",value:function(){return this.http.get(this.apiUrl+"totals")}},{key:"getAverageReunionsPerUser",value:function(){return this.http.get(this.apiUrl+"average-reunions-per-user")}},{key:"getTasksByStatus",value:function(){return this.http.get(this.apiUrl+"tasks-by-status")}},{key:"taskCompletionRateByUser",value:function(){return this.http.get(this.apiUrl+"task-completion-rate-by-user")}},{key:"getAverageTasksPerUser",value:function(){return this.http.get(this.apiUrl+"average-tasks-per-user")}},{key:"getUsersByCompany",value:function(){return this.http.get(this.apiUrl+"users-by-company")}},{key:"getTasksCompletedVsIncomplete",value:function(){return this.http.get(this.apiUrl+"tasks-completed-vs-incomplete")}},{key:"getTasksPerUser",value:function(){return this.http.get(this.apiUrl+"tasks-per-user")}},{key:"getCompletedTasksPerUser",value:function(){return this.http.get(this.apiUrl+"completed-tasks-per-user")}}]),i}();return s.\u0275fac=function(n){return new(n||s)(t.LFG(k.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s}(),U=[{path:"",children:[{path:"",component:function(){var s=function(){function i(n){(0,m.Z)(this,i),this.statisticsService=n,this.meetingsCount=0,this.tasksCount=0,this.participantsCount=0,this.meetingImagePath="./assets/img/meeting-icon-png-presentation-icon-board-meeting-icon-meeting-icon--4.png",this.tasksImagePath="./assets/img/Utilities-tasks-icon.png",this.participantsImagePath="./assets/img/8428718.png"}return(0,l.Z)(i,[{key:"ngOnInit",value:function(){var e=this;this.statisticsService.getTotals().subscribe(function(a){e.createTotalsChart(a),e.meetingsCount=a.reunions_count,e.tasksCount=a.tasks_count,e.participantsCount=a.users_count,e.updateTotalsChart()}),this.statisticsService.getAverageReunionsPerUser().subscribe(function(a){e.createAverageReunionsChart(a)}),this.statisticsService.getTasksByStatus().subscribe(function(a){e.createTasksByStatusChart(a)}),this.statisticsService.taskCompletionRateByUser().subscribe(function(a){e.createTaskCompletionRateChart(a)}),this.statisticsService.getAverageTasksPerUser().subscribe(function(a){e.createAverageTasksPerUserChart(a)}),this.statisticsService.getUsersByCompany().subscribe(function(a){e.createUsersByCompanyChart(a)})}},{key:"updateTotalsChart",value:function(){var e=document.getElementById("meetingsCount"),a=document.getElementById("tasksCount"),r=document.getElementById("participantsCount");e&&a&&r&&(e.textContent=this.meetingsCount.toString(),a.textContent=this.tasksCount.toString(),r.textContent=this.participantsCount.toString())}},{key:"createTotalsChart",value:function(e){var a=document.getElementById("meetingsBox");a&&(a.innerHTML="<h3>".concat(e.reunions_count,"</h3><p>Meetings</p>"));var r=document.getElementById("tasksBox");r&&(r.innerHTML="<h3>".concat(e.tasks_count,"</h3><p>Tasks</p>"));var d=document.getElementById("participantsBox");d&&(d.innerHTML="<h3>".concat(e.users_count,"</h3><p>Participants</p>"));var p=document.getElementById("totalsChart");new(g())(p,{type:"bar",data:{labels:["Meetings","Tasks","Participants"],datasets:[{label:"Totals",data:[e.reunions_count,e.tasks_count,e.users_count],backgroundColor:"rgba(0, 51, 102, 0.9)",borderColor:"rgba(0, 51, 102, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0,min:0,suggestedMax:Math.max(e.reunions_count,e.tasks_count,e.users_count)+5}},indexAxis:"y",elements:{bar:{borderWidth:2,borderSkipped:"start",borderRadius:20}}}})}},{key:"createAverageReunionsChart",value:function(e){var a=document.getElementById("averageReunionsChart"),r=e.average_reunions_per_user;new(g())(a,{type:"pie",data:{labels:["Average Reunions","Remaining"],datasets:[{data:[r,100-r],backgroundColor:["rgba(75, 192, 192, 0.5)","rgba(0, 51, 102, 0.9)"],borderColor:["rgba(75, 192, 192, 1)","rgba(0, 51, 102,1)"],borderWidth:1}]},options:{plugins:{datalabels:{formatter:function(p,o){var x=o.chart.data.datasets[o.datasetIndex].data.reduce(function(B,S){return B+S},0),A=Math.round(p/x*100)+"%";return"".concat(p," (").concat(A,")")},color:"#fff"}},scales:{y:{beginAtZero:!0}}}})}},{key:"createTasksByStatusChart",value:function(e){var a=document.getElementById("tasksByStatusChart");new(g())(a,{type:"pie",data:{labels:["to-do","completed"],datasets:[{label:"Tasks by Status",data:e.tasks_by_status.map(function(r){return r.count}),backgroundColor:["rgba(0, 51, 102, 0.9)","rgba(54, 162, 235, 0.5)"],borderColor:["rgba(0, 51, 102,1)","rgba(54, 162, 235, 1)"],borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}})}},{key:"createTaskCompletionRateChart",value:function(e){var a=e.task_completion_rate_by_user.map(function(o){return o.completed_tasks_count}),d=e.task_completion_rate_by_user.map(function(o){return o.tasks_count}).map(function(o,u){return o-a[u]}),p=document.getElementById("taskCompletionRateChart");new(g())(p,{type:"doughnut",data:{labels:["Completed","Incomplete"],datasets:[{label:"Task Completion Rate",data:[a.reduce(function(o,u){return o+u},0),d.reduce(function(o,u){return o+u},0)],backgroundColor:["rgba(75, 192, 192, 0.5)","rgba(0, 51, 102, 0.75)"],borderColor:["rgba(75, 192, 192, 1)","rgba(0, 51, 102, 1)"],borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}})}},{key:"createAverageTasksPerUserChart",value:function(e){var a=document.getElementById("averageTasksPerUserChart");new(g())(a,{type:"bar",data:{labels:["Average Tasks per User"],datasets:[{label:"Average Tasks per User",data:[e.average_tasks_per_user],backgroundColor:"rgba(0, 51, 102, 0.9)",borderColor:"rgba(0, 51, 102,1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}},layout:{padding:{left:10,right:10,top:10,bottom:10}},indexAxis:"y",elements:{bar:{borderWidth:2,borderSkipped:"start",borderRadius:20}}}})}},{key:"createUsersByCompanyChart",value:function(e){var a=document.getElementById("usersByCompanyChart");new(g())(a,{type:"bar",data:{labels:e.map(function(r){return"Company ".concat(r.company_id)}),datasets:[{label:"Utilisateurs par soci\xe9t\xe9",data:e.map(function(r){return r.count}),backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}})}}]),i}();return s.\u0275fac=function(n){return new(n||s)(t.Y36(f))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-statistique"]],decls:78,vars:3,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"main-content"],[1,"row"],[1,"col-md-2"],["id","meetingsBox",1,"box"],["id","meetingsCount"],["src","./assets/img/meeting-icon-png-presentation-icon-board-meeting-icon-meeting-icon--4.png","alt","Meetings Image"],["id","tasksBox",1,"box"],["id","tasksCount"],["src","./assets/img/Utilities-tasks-icon.png","alt","Tasks Image"],["id","participantsBox",1,"box"],["id","participantsCount"],["src","./assets/img/8428718.png","alt","Participants Image"],[1,"col-md-6"],[1,"card","card-chart"],[1,"card-header"],[1,"card-title"],[1,"card-category"],[1,"card-body"],["id","averageReunionsChart"],["id","tasksByStatusChart"],["id","taskCompletionRateChart"],["id","averageTasksPerUserChart"],["id","usersByCompanyChart"]],template:function(n,e){1&n&&(t.TgZ(0,"html",0)(1,"head"),t._UZ(2,"meta",1)(3,"meta",2),t.TgZ(4,"title"),t._uU(5,"Statistics Dashboard"),t.qZA()(),t.TgZ(6,"body")(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"h3",7),t._uU(12),t.qZA(),t.TgZ(13,"p"),t._uU(14,"Meetings"),t.qZA(),t._UZ(15,"img",8),t.qZA()(),t.TgZ(16,"div",5)(17,"div",9)(18,"h3",10),t._uU(19),t.qZA(),t.TgZ(20,"p"),t._uU(21,"Tasks"),t.qZA(),t._UZ(22,"img",11),t.qZA()(),t.TgZ(23,"div",5)(24,"div",12)(25,"h3",13),t._uU(26),t.qZA(),t.TgZ(27,"p"),t._uU(28,"Participants"),t.qZA(),t._UZ(29,"img",14),t.qZA()()(),t.TgZ(30,"div",4)(31,"div",15)(32,"div",16)(33,"div",17)(34,"h5",18),t._uU(35,"Average Meetings per User"),t.qZA(),t.TgZ(36,"p",19),t._uU(37,"Line Chart"),t.qZA()(),t.TgZ(38,"div",20),t._UZ(39,"canvas",21),t.qZA()()()(),t.TgZ(40,"div",4)(41,"div",15)(42,"div",16)(43,"div",17)(44,"h5",18),t._uU(45,"Tasks by Status"),t.qZA(),t.TgZ(46,"p",19),t._uU(47,"Pie Chart"),t.qZA()(),t.TgZ(48,"div",20),t._UZ(49,"canvas",22),t.qZA()()(),t.TgZ(50,"div",15)(51,"div",16)(52,"div",17)(53,"h5",18),t._uU(54,"Task Completion Rate"),t.qZA(),t.TgZ(55,"p",19),t._uU(56,"Doughnut Chart"),t.qZA()(),t.TgZ(57,"div",20),t._UZ(58,"canvas",23),t.qZA()()()(),t.TgZ(59,"div",4)(60,"div",15)(61,"div",16)(62,"div",17)(63,"h5",18),t._uU(64,"Average Tasks per User"),t.qZA(),t.TgZ(65,"p",19),t._uU(66,"Line Chart"),t.qZA()(),t.TgZ(67,"div",20),t._UZ(68,"canvas",24),t.qZA()()(),t.TgZ(69,"div",15)(70,"div",16)(71,"div",17)(72,"h5",18),t._uU(73,"Users by Company"),t.qZA(),t.TgZ(74,"p",19),t._uU(75,"Bar Chart"),t.qZA()(),t.TgZ(76,"div",20),t._UZ(77,"canvas",25),t.qZA()()()()()()()),2&n&&(t.xp6(12),t.Oqu(e.meetingsCount),t.xp6(7),t.Oqu(e.tasksCount),t.xp6(7),t.Oqu(e.participantsCount))},styles:["",".box[_ngcontent-%COMP%] {\n      position: relative;\n      margin-bottom: 20px;\n      padding: 20px;\n      text-align: center;\n      border: 1px solid #ccc;\n      border-radius: 10px;\n      background-color: #f9f9f9;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n    }\n\n    .box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n      width: 50px;\n      height: auto;\n      margin-top: auto; \n      margin-bottom: 10px;\n    }\n\n    .box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\n      margin: 0;\n    }\n\n    .box[_ngcontent-%COMP%]::before {\n      content: '';\n      position: absolute;\n      top: -10px;\n      left: 0;\n      width: 100%;\n      height: 2px;\n      background-color: #ccc;\n    }\n\n    .row[_ngcontent-%COMP%] {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 20px;\n      justify-content: space-around;\n    }\n\n    .col-md-2[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%] {\n      flex: 0 0 auto;\n      max-width: calc(33.33% - 20px);\n    }\n\n    .col-md-6[_ngcontent-%COMP%] {\n      max-width: calc(50% - 20px);\n    }"]}),s}()}]}],Z=function(){var s=(0,l.Z)(function i(){(0,m.Z)(this,i)});return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[v.ez,C.Bz.forChild(U),b.u5]]}),s}()}}]);