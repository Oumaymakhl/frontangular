"use strict";(self.webpackChunkpd_pro_angularcli=self.webpackChunkpd_pro_angularcli||[]).push([[474],{75474:function(Z,l,r){r.r(l),r.d(l,{TaskuserModule:function(){return O}});var k=r(43144),g=r(15671),u=r(69808),f=r(52297),c=r(92331),t=r(91891),m=r(999);function v(n,a){if(1&n&&(t.TgZ(0,"div",8)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()),2&n){var s=a.$implicit;t.Q6J("cdkDragData",s),t.xp6(2),t.Oqu(s.name),t.xp6(2),t.Oqu(s.description),t.xp6(2),t.hij("Estim\xe9: ",s.estimated_time," heures")}}function x(n,a){1&n&&(t.TgZ(0,"div",9),t._uU(1," Aucune t\xe2che dans cette colonne "),t.qZA())}function T(n,a){if(1&n){var s=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"h2"),t._uU(3),t.qZA(),t.TgZ(4,"div",5),t.NdJ("cdkDropListDropped",function(i){var p=t.CHM(s).$implicit;return t.oxw().onTaskDropped(i,p)}),t.YNc(5,v,7,4,"div",6),t.YNc(6,x,2,0,"div",7),t.qZA()()()}if(2&n){var o=a.$implicit;t.xp6(3),t.Oqu(o.title),t.xp6(1),t.Q6J("cdkDropListData",o.tasks),t.xp6(1),t.Q6J("ngForOf",o.tasks),t.xp6(1),t.Q6J("ngIf",0===o.tasks.length)}}var C=[{path:"",children:[{path:"task-user",component:function(){var n=function(){function a(s){(0,g.Z)(this,a),this.taskService=s,this.columns=[{title:"to-do",tasks:[]},{title:"completed",tasks:[]}]}return(0,k.Z)(a,[{key:"ngOnInit",value:function(){this.loadTasks()}},{key:"loadTasks",value:function(){var o=this;this.taskService.getTasks().subscribe(function(e){console.log("Loaded tasks:",e.tasks),o.columns[0].tasks=e.tasks.filter(function(i){return"completed"!==i.status}),o.columns[1].tasks=e.tasks.filter(function(i){return"completed"===i.status}),console.log("To-Do tasks:",o.columns[0].tasks),console.log("Completed tasks:",o.columns[1].tasks)},function(e){console.error("Error loading tasks:",e)})}},{key:"onTaskDropped",value:function(o,e){console.log("Task dropped:",o);var i=o.item.data;if(o.previousContainer===o.container)console.log("Moving item in the same container"),(0,c.bA)(e.tasks,o.previousIndex,o.currentIndex);else{console.log("Transferring item between containers"),(0,c.EA)(o.previousContainer.data,o.container.data,o.previousIndex,o.currentIndex);var d="to-do"===e.title?"to do":"completed";i.status=d,console.log("Updating task status to:",d),this.taskService.updateTaskStatus(i.id,i.status).subscribe(function(){console.log("Task status updated successfully.")},function(p){console.error("Error updating task status:",p),(0,c.EA)(o.container.data,o.previousContainer.data,o.currentIndex,o.previousIndex)})}}}]),a}();return n.\u0275fac=function(s){return new(s||n)(t.Y36(m.M))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-task-user"]],decls:3,vars:1,consts:[["cdkDropListGroup",""],[1,"kanban-board"],["class","column",4,"ngFor","ngForOf"],[1,"column"],[1,"container"],["cdkDropList","",1,"task-container",3,"cdkDropListData","cdkDropListDropped"],["class","task","cdkDrag","",3,"cdkDragData",4,"ngFor","ngForOf"],["class","empty-task",4,"ngIf"],["cdkDrag","",1,"task",3,"cdkDragData"],[1,"empty-task"]],template:function(s,o){1&s&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,T,7,4,"div",2),t.qZA()()),2&s&&(t.xp6(2),t.Q6J("ngForOf",o.columns))},directives:[c.Fd,u.sg,c.Wj,c.Zt,u.O5],styles:[".kanban-board[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:50px}.column[_ngcontent-%COMP%]{flex-grow:1;padding:10px}.container[_ngcontent-%COMP%]{background-color:#95a8c0;border:1px solid #ccc;border-radius:10px;box-shadow:0 4px 8px #0000001a;padding:20px;margin-top:20px;transition:box-shadow .3s ease;width:300px}.container[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0003}.task-container[_ngcontent-%COMP%]{min-height:100px}.task[_ngcontent-%COMP%]{background-color:#2b528d;padding:15px;margin-bottom:10px;cursor:pointer;border-radius:8px;transition:background-color .3s ease}.task[_ngcontent-%COMP%]:hover{background-color:#bbcdda}.empty-task[_ngcontent-%COMP%]{text-align:center;color:#999;font-style:italic}h2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;color:#333}body[_ngcontent-%COMP%]{background-color:#f5f5f5;font-family:Arial,sans-serif}"]}),n}()}]}],D=r(93075),O=function(){var n=(0,k.Z)(function a(){(0,g.Z)(this,a)});return n.\u0275fac=function(s){return new(s||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,f.Bz.forChild(C),D.u5,c._t]]}),n}()}}]);