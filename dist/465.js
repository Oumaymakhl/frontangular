"use strict";(self.webpackChunkpd_pro_angularcli=self.webpackChunkpd_pro_angularcli||[]).push([[465],{6465:function(z,Z,s){s.r(Z),s.d(Z,{CompteParticipantModule:function(){return V}});var g=s(43144),f=s(15671),d=s(69808),c=s(52297),P=s(1826),y=s(67622),T=s(1702),r=s(93075),M=s(40520),x=s(41466),A=s(55041),h=s(45892),t=s(91891),q=function(o){return["/compte-participant/modif",o]};function U(n,o){if(1&n){var i=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"a",15),t._UZ(11,"i",16),t.qZA(),t.TgZ(12,"button",17),t.NdJ("click",function(p){var v=t.CHM(i).$implicit;return t.oxw().deleteParticipant(p,v.id)}),t._UZ(13,"i",18),t.qZA()()()}if(2&n){var e=o.$implicit;t.xp6(2),t.Oqu(e.nom),t.xp6(2),t.Oqu(e.prenom),t.xp6(2),t.Oqu(e.login),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Q6J("routerLink",t.VKq(5,q,e.id))}}function w(n,o){1&n&&(t.TgZ(0,"tr")(1,"td",19),t._uU(2,"Aucun participant trouv\xe9"),t.qZA()())}var O=function(){var n=function(){function o(i,e){(0,f.Z)(this,o),this.participantService=i,this.router=e,this.searchTerm=""}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){this.loadParticipants()}},{key:"loadParticipants",value:function(){var e=this;this.participantService.getparticipants().subscribe(function(a){e.participants=a.users,console.log(a)},function(a){console.error("Error loading participants:",a)})}},{key:"deleteParticipant",value:function(e,a){var p=this;confirm("Are you sure you want to delete this participant?")&&(e.target.innerText="Deleting",this.participantService.delete(a).subscribe(function(l){p.loadParticipants()}))}},{key:"ajouterParticipant",value:function(){this.router.navigate(["/compte-participant/ajout"])}},{key:"filteredParticipants",value:function(){var e=this;return this.participants.filter(function(a){return a.nom.toLowerCase().includes(e.searchTerm.toLowerCase())||a.email.toLowerCase().includes(e.searchTerm.toLowerCase())})}}]),o}();return n.\u0275fac=function(i){return new(i||n)(t.Y36(h.E),t.Y36(c.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-liste-participant"]],decls:34,vars:3,consts:[[1,"container-xl","mt-5","mb-4"],[1,"table-responsive"],[1,"table-wrapper","mt-5"],[1,"table","table-bordered","shadow","rounded"],["colspan","8"],[1,"table-title","bg-custom-blue","text-light","p-4","rounded-top","d-flex","justify-content-between","align-items-center"],[1,"m-0"],[1,"d-flex","align-items-center"],["type","text","placeholder","Search by name or email",1,"form-control","w-50","mr-2",3,"ngModel","ngModelChange"],[1,"bouton",3,"click"],[1,"fas","fa-plus-circle","mr-2"],[1,"table","table-striped","table-hover"],[1,"bg-white","text-dark"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"bouton",3,"routerLink"],[1,"fa","fa-edit"],["type","button",1,"bouton",3,"click"],[1,"fa","fa-times"],["colspan","8",1,"text-center"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"tbody")(5,"tr")(6,"td",4)(7,"div",5)(8,"h4",6)(9,"b"),t._uU(10,"List of participants"),t.qZA()(),t.TgZ(11,"div",7)(12,"input",8),t.NdJ("ngModelChange",function(p){return e.searchTerm=p}),t.qZA(),t.TgZ(13,"button",9),t.NdJ("click",function(){return e.ajouterParticipant()}),t._UZ(14,"i",10),t._uU(15," Add "),t.qZA()()()()(),t.TgZ(16,"tr")(17,"td")(18,"table",11)(19,"thead",12)(20,"tr")(21,"th"),t._uU(22,"Last Name"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"First Name"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Login"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Email"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Actions"),t.qZA()()(),t.TgZ(31,"tbody"),t.YNc(32,U,14,7,"tr",13),t.YNc(33,w,3,0,"tr",14),t.qZA()()()()()()()()()),2&i&&(t.xp6(12),t.Q6J("ngModel",e.searchTerm),t.xp6(20),t.Q6J("ngForOf",e.filteredParticipants()),t.xp6(1),t.Q6J("ngIf",0===e.filteredParticipants().length))},directives:[r.Fj,r.JJ,r.On,d.sg,c.yS,d.O5],styles:[".table-responsive[_ngcontent-%COMP%]{overflow-x:auto}.table-wrapper[_ngcontent-%COMP%]{margin-top:20px}.table-bordered[_ngcontent-%COMP%]{border:1px solid #003366}.custom-width[_ngcontent-%COMP%]{width:100%}.table-title[_ngcontent-%COMP%]{background-color:#036;color:#fff;padding:20px;border-radius:10px}.table-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}.table-title[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #003366;border-radius:5px}.table-title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#0069d9;color:#fff;border:none;border-radius:5px}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#f5f5f5}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn-table[_ngcontent-%COMP%]{color:#fff;border:none;border-radius:5px}.btn-table[_ngcontent-%COMP%]:hover{opacity:.8}.bouton[_ngcontent-%COMP%]{display:inline-block;background-color:#719fee;border-radius:5px;border:none;color:#fff;text-align:center;font-size:16px;padding:5px 10px;width:auto;cursor:pointer}.bouton[_ngcontent-%COMP%] + .bouton[_ngcontent-%COMP%]{margin-left:10px}"]}),n}(),J=function(o,i){return{"alert-success":o,"alert-danger":i}};function F(n,o){if(1&n&&(t.TgZ(0,"div",34),t._uU(1),t.qZA()),2&n){var i=t.oxw();t.Q6J("ngClass",t.WLB(2,J,"success"===i.messageType,"danger"===i.messageType)),t.xp6(1),t.hij(" ",i.message," ")}}function k(n,o){1&n&&(t.TgZ(0,"div",35),t._uU(1,"Password is required"),t.qZA())}function N(n,o){1&n&&(t.TgZ(0,"div",35),t._uU(1,"Password must be at least 8 characters"),t.qZA())}function I(n,o){1&n&&(t.TgZ(0,"div",35),t._uU(1,"Email is required"),t.qZA())}function L(n,o){1&n&&(t.TgZ(0,"div",35),t._uU(1,"Please enter a valid email address"),t.qZA())}var j=function(){var n=function(){function o(i,e){(0,f.Z)(this,o),this.formBuilder=i,this.userService=e,this.passwordVisible=!1,this.submitted=!1,this.message=null,this.messageType=null}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){this.participantForm=this.formBuilder.group({nom:["",r.kI.required],prenom:["",r.kI.required],login:["",r.kI.required],password:["",r.kI.required],email:["",[r.kI.required,r.kI.email]],company_id:["",r.kI.required]})}},{key:"saveParticipant",value:function(){var a,p,l,v,b,_,e=this;if(this.submitted=!0,!this.participantForm.invalid){var u=new FormData;u.append("nom",null===(a=this.participantForm.get("nom"))||void 0===a?void 0:a.value),u.append("prenom",null===(p=this.participantForm.get("prenom"))||void 0===p?void 0:p.value),u.append("login",null===(l=this.participantForm.get("login"))||void 0===l?void 0:l.value),u.append("password",null===(v=this.participantForm.get("password"))||void 0===v?void 0:v.value),u.append("email",null===(b=this.participantForm.get("email"))||void 0===b?void 0:b.value),u.append("company_id",null===(_=this.participantForm.get("company_id"))||void 0===_?void 0:_.value),this.userService.saveparticipant(u).subscribe(function(m){console.log(m,"response"),e.message="Participant added successfully!",e.messageType="success",e.participantForm.reset(),e.submitted=!1},function(m){e.errors=m.error,console.log(m.error,"errors"),e.message="User already exists"===m.error.message?"User already exists":"Email or login already exists in other roles"===m.error.message?"Email or login already exists in other roles":"Failed to add participant. Please check the form and try again.",e.messageType="danger"})}}},{key:"togglePasswordVisibility",value:function(){this.passwordVisible=!this.passwordVisible,document.getElementById("password").type=this.passwordVisible?"text":"password"}}]),o}();return n.\u0275fac=function(i){return new(i||n)(t.Y36(r.qu),t.Y36(h.E))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ajout-partcipant"]],decls:62,vars:7,consts:[[1,"container-xl",2,"margin-top","80px","margin-bottom","100px"],[1,"table-responsive"],[1,"table-wrapper"],[1,"card","shadow"],[1,"table-title","bg-custom-blue","text-light","p-4","rounded-top","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"col-auto"],["type","button","routerLink","/compte-participant",1,"btn","btn-secondary"],[1,"card-body"],[1,"form",3,"formGroup","ngSubmit"],["form","ngForm"],["class","alert",3,"ngClass",4,"ngIf"],[1,"form-group","p-10","row"],[1,"col-sm-3"],["for","nom",1,"p-t-b-10"],[1,"col-sm-9"],["type","text","formControlName","nom","id","nom","placeholder","Last Name",1,"form-control"],["for","prenom",1,"p-t-b-10"],["type","text","formControlName","prenom","id","prenom","placeholder","First Name",1,"form-control"],["for","login",1,"p-t-b-10"],["type","text","formControlName","login","id","login","placeholder","Login",1,"form-control"],["for","password",1,"p-t-b-10"],[1,"col-sm-9","input-group"],["type","password","formControlName","password","id","password","placeholder","Password","minlength","8",1,"form-control"],[1,"input-group-append"],[1,"input-group-text",3,"click"],["aria-hidden","true",3,"ngClass"],["class","text-danger",4,"ngIf"],["for","email",1,"p-t-b-10"],["type","email","formControlName","email","id","email","placeholder","Email",1,"form-control"],["for","company_id",1,"p-t-b-10"],["type","text","formControlName","company_id","id","company_id","placeholder","Company ID",1,"form-control"],[1,"col-sm-12","text-center"],["type","submit",1,"bouton"],[1,"alert",3,"ngClass"],[1,"text-danger"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"h4",5),t._uU(7,"Add a participant"),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7),t._uU(10,"Back"),t.qZA()()(),t.TgZ(11,"div",8)(12,"form",9,10),t.NdJ("ngSubmit",function(){return e.saveParticipant()}),t.YNc(14,F,2,5,"div",11),t.TgZ(15,"div",12)(16,"div",13)(17,"label",14),t._uU(18,"Last Name:"),t.qZA()(),t.TgZ(19,"div",15),t._UZ(20,"input",16),t.qZA()(),t.TgZ(21,"div",12)(22,"div",13)(23,"label",17),t._uU(24,"First Name:"),t.qZA()(),t.TgZ(25,"div",15),t._UZ(26,"input",18),t.qZA()(),t.TgZ(27,"div",12)(28,"div",13)(29,"label",19),t._uU(30,"Login:"),t.qZA()(),t.TgZ(31,"div",15),t._UZ(32,"input",20),t.qZA()(),t.TgZ(33,"div",12)(34,"div",13)(35,"label",21),t._uU(36,"Password:"),t.qZA()(),t.TgZ(37,"div",22),t._UZ(38,"input",23),t.TgZ(39,"div",24)(40,"span",25),t.NdJ("click",function(){return e.togglePasswordVisibility()}),t._UZ(41,"i",26),t.qZA()(),t.YNc(42,k,2,0,"div",27),t.YNc(43,N,2,0,"div",27),t.qZA()(),t.TgZ(44,"div",12)(45,"div",13)(46,"label",28),t._uU(47,"Email:"),t.qZA()(),t.TgZ(48,"div",15),t._UZ(49,"input",29),t.YNc(50,I,2,0,"div",27),t.YNc(51,L,2,0,"div",27),t.qZA()(),t.TgZ(52,"div",12)(53,"div",13)(54,"label",30),t._uU(55,"Company ID:"),t.qZA()(),t.TgZ(56,"div",15),t._UZ(57,"input",31),t.qZA()(),t.TgZ(58,"div",12)(59,"div",32)(60,"button",33),t._uU(61,"Add"),t.qZA()()()()()()()()()),2&i&&(t.xp6(12),t.Q6J("formGroup",e.participantForm),t.xp6(2),t.Q6J("ngIf",e.message),t.xp6(27),t.Q6J("ngClass",e.passwordVisible?"fa fa-eye":"fa fa-eye-slash"),t.xp6(1),t.Q6J("ngIf",e.submitted&&(null==e.participantForm.controls.password.errors?null:e.participantForm.controls.password.errors.required)),t.xp6(1),t.Q6J("ngIf",e.submitted&&(null==e.participantForm.controls.password.errors?null:e.participantForm.controls.password.errors.minlength)),t.xp6(7),t.Q6J("ngIf",e.submitted&&(null==e.participantForm.controls.email.errors?null:e.participantForm.controls.email.errors.required)),t.xp6(1),t.Q6J("ngIf",e.submitted&&(null==e.participantForm.controls.email.errors?null:e.participantForm.controls.email.errors.email)))},directives:[c.rH,r._Y,r.JL,r.sg,d.O5,d.mk,r.Fj,r.JJ,r.u,r.wO],styles:[".bg-custom-blue[_ngcontent-%COMP%]{background-color:#036;color:#fff}.green-btn[_ngcontent-%COMP%]{background-color:#28a745;border-color:#28a745}.container-xl[_ngcontent-%COMP%]{width:60%;margin:50px auto 70px}.bouton[_ngcontent-%COMP%]{display:inline-block;background-color:#719fee;border-radius:5px;border:none;color:#fff;text-align:center;font-size:16px;padding:5px 10px;width:auto;cursor:pointer}"]}),n}(),Q=function(o,i){return{"alert alert-success":o,"alert alert-danger":i}};function E(n,o){if(1&n&&(t.TgZ(0,"div",24),t._uU(1),t.qZA()),2&n){var i=t.oxw();t.Q6J("ngClass",t.WLB(2,Q,"success"===i.messageType,"danger"===i.messageType)),t.xp6(1),t.hij(" ",i.message," ")}}var Y=[{path:"",component:O},{path:"modif/:id",component:function(){var n=function(){function o(i,e){(0,f.Z)(this,o),this.route=i,this.participantservice=e,this.participant={},this.loading=!0,this.message=null,this.messageType=null}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var e=this;this.participantId=this.route.snapshot.paramMap.get("id"),this.participantservice.getParticipant(this.participantId).subscribe(function(a){console.log(a),e.participant=a.user,e.loading=!1})}},{key:"updateParticipant",value:function(){var e=this;this.participantservice.updateparticipant({nom:this.participant.nom,prenom:this.participant.prenom,login:this.participant.login,email:this.participant.email,company_id:this.participant.company_id},this.participantId).subscribe({next:function(l){console.log(l),e.message=l.message,e.messageType="success"},error:function(l){console.error(l),404===l.status?e.message="User not found":422===l.status?"User already exists"===l.error.message?e.message="User already exists":"Email or login already exists in other roles"===l.error.message&&(e.message="Email or login already exists in other roles"):e.message="Failed to update participant. Please try again.",e.messageType="danger"}})}}]),o}();return n.\u0275fac=function(i){return new(i||n)(t.Y36(c.gz),t.Y36(h.E))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-modif-partcipant"]],decls:57,vars:6,consts:[[1,"container-xl","mt-5"],[1,"table-responsive"],[1,"table-wrapper"],[1,"card","shadow"],[1,"table-title","bg-custom-blue","text-light","p-4","rounded-top","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"col-auto"],["type","button","routerLink","/compte-participant",1,"btn","btn-secondary"],[1,"card-body"],[1,"form",3,"ngSubmit"],["f","ngForm"],[3,"ngClass",4,"ngIf"],[1,"form-group","p-10","row"],[1,"col-sm-3"],[1,"p-t-b-10"],[1,"requiredStar"],[1,"col-sm-9"],["type","text","name","nom","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","prenom","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","login","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","companySelect",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-12","text-center"],["type","submit",1,"bouton"],[3,"ngClass"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"h4",5),t._uU(7,"Edit participant"),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7),t._uU(10,"Back"),t.qZA()()(),t.TgZ(11,"div",8)(12,"form",9,10),t.NdJ("ngSubmit",function(){return e.updateParticipant()}),t.YNc(14,E,2,5,"div",11),t.TgZ(15,"div",12)(16,"div",13)(17,"label",14),t._uU(18,"Last Name"),t.TgZ(19,"span",15),t._uU(20,"*"),t.qZA()()(),t.TgZ(21,"div",16)(22,"input",17),t.NdJ("ngModelChange",function(p){return e.participant.nom=p}),t.qZA()()(),t.TgZ(23,"div",12)(24,"div",13)(25,"label",14),t._uU(26,"First Name"),t.TgZ(27,"span",15),t._uU(28,"*"),t.qZA()()(),t.TgZ(29,"div",16)(30,"input",18),t.NdJ("ngModelChange",function(p){return e.participant.prenom=p}),t.qZA()()(),t.TgZ(31,"div",12)(32,"div",13)(33,"label",14),t._uU(34,"Login"),t.TgZ(35,"span",15),t._uU(36,"*"),t.qZA()()(),t.TgZ(37,"div",16)(38,"input",19),t.NdJ("ngModelChange",function(p){return e.participant.login=p}),t.qZA()()(),t.TgZ(39,"div",12)(40,"div",13)(41,"label",14),t._uU(42,"Email Address"),t.TgZ(43,"span",15),t._uU(44,"*"),t.qZA()()(),t.TgZ(45,"div",16)(46,"input",20),t.NdJ("ngModelChange",function(p){return e.participant.email=p}),t.qZA()()(),t.TgZ(47,"div",12)(48,"div",13)(49,"label",14),t._uU(50,"Company"),t.qZA()(),t.TgZ(51,"div",16)(52,"input",21),t.NdJ("ngModelChange",function(p){return e.participant.company_id=p}),t.qZA()()(),t.TgZ(53,"div",12)(54,"div",22)(55,"button",23),t._uU(56,"Update"),t.qZA()()()()()()()()()),2&i&&(t.xp6(14),t.Q6J("ngIf",e.message),t.xp6(8),t.Q6J("ngModel",e.participant.nom),t.xp6(8),t.Q6J("ngModel",e.participant.prenom),t.xp6(8),t.Q6J("ngModel",e.participant.login),t.xp6(8),t.Q6J("ngModel",e.participant.email),t.xp6(6),t.Q6J("ngModel",e.participant.company_id))},directives:[c.rH,r._Y,r.JL,r.F,d.O5,d.mk,r.Fj,r.Q7,r.JJ,r.On],styles:[".bg-custom-blue[_ngcontent-%COMP%]{background-color:#036;color:#fff}.container-xl[_ngcontent-%COMP%]{width:60%;margin:50px auto 70px}.green-btn[_ngcontent-%COMP%]{background-color:#28a745;border-color:#28a745}.bouton[_ngcontent-%COMP%]{display:inline-block;background-color:#719fee;border-radius:5px;border:none;color:#fff;text-align:center;font-size:16px;padding:5px 10px;width:auto;cursor:pointer}"]}),n}()},{path:"ajout",component:j}],C=function(){var n=(0,g.Z)(function o(){(0,f.Z)(this,o)});return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.Bz.forChild(Y)],c.Bz]}),n}(),B=s(59993),V=function(){var n=(0,g.Z)(function o(){(0,f.Z)(this,o)});return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n,bootstrap:[A.y]}),n.\u0275inj=t.cJS({providers:[x.l,h.E,C,B.J],imports:[[d.ez,c.Bz.forChild(P.$),r.u5,y.vO,T.IJ,r.UX,M.JF,C]]}),n}()}}]);